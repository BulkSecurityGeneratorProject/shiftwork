<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
   <changeSet author="jianbo (generated)" id="1467501651919-1">
      <createTable tableName="contract_weekend_definitions">
         <column name="weekend_definitions_id" type="BIGINT">
            <constraints nullable="false"/>
         </column>
         <column name="contracts_id" type="BIGINT">
            <constraints nullable="false"/>
         </column>
      </createTable>
   </changeSet>
   <changeSet author="jianbo (generated)" id="1467501651919-2">
      <addColumn tableName="shift_date">
         <column name="date" type="date(13)"/>
      </addColumn>
   </changeSet>
   <changeSet author="jianbo (generated)" id="1467501651919-3">
      <addPrimaryKey columnNames="contracts_id, weekend_definitions_id"
                     constraintName="contract_weekend_definitions_pkey"
                     tableName="contract_weekend_definitions"/>
   </changeSet>
   <changeSet author="jianbo (generated)" id="1467501651919-4">
      <addForeignKeyConstraint baseColumnNames="weekend_definitions_id"
                               baseTableName="contract_weekend_definitions"
                               constraintName="fk_contract_weekend_definitions_contract_id"
                               deferrable="false"
                               initiallyDeferred="false"
                               onDelete="NO ACTION"
                               onUpdate="NO ACTION"
                               referencedColumnNames="id"
                               referencedTableName="weekend_definition"/>
   </changeSet>
   <changeSet author="jianbo (generated)" id="1467501651919-5">
      <addForeignKeyConstraint baseColumnNames="contracts_id"
                               baseTableName="contract_weekend_definitions"
                               constraintName="fk_contract_weekend_definitions_weekenddefinition_id"
                               deferrable="false"
                               initiallyDeferred="false"
                               onDelete="NO ACTION"
                               onUpdate="NO ACTION"
                               referencedColumnNames="id"
                               referencedTableName="contract"/>
   </changeSet>
   <changeSet author="jianbo (generated)" id="1467501651919-6">
      <dropForeignKeyConstraint baseTableName="contract"
                                constraintName="fk_contract_weekenddefinition_id"/>
   </changeSet>
   <changeSet author="jianbo (generated)" id="1467501651919-7">
      <dropUniqueConstraint constraintName="contract_weekend_definition_id_key"
                            tableName="contract"/>
   </changeSet>
   <changeSet author="jianbo (generated)" id="1467501651919-8">
      <dropColumn columnName="date_string" tableName="shift_date"/>
   </changeSet>
   <changeSet author="jianbo (generated)" id="1467501651919-9">
      <dropColumn columnName="weekend_definition_id" tableName="contract"/>
   </changeSet>
</databaseChangeLog>
